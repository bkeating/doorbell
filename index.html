<!DOCTYPE html>
<html>
  <head>
  	<link rel="stylesheet" type="text/css" href="http://blog.smashingkeyboards.com/wp-content/uploads/2014/05/style.css">
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script>
	var doorbell;
	var chime;
      	var socket = io.connect('http://192.168.222.253');
	window.onload = function () {
                chime = document.getElementById('chime');
                doorbell = document.getElementById('doorbell');
                doorbell.onmousedown = function () {play();};
                doorbell.onmouseup = function () {pause();};
                doorbell.onmouseout = function () {pause();};
                doorbell.ontouchend = function () {pause();};
        }
	function end()
        {
                chime.currentTime = 0;
                chime.pause();
        }
	function play()
	{
		socket.emit('play', 'play');
		chime.play();
	}
	function pause()
	{
		socket.emit('stop', 'stop');
		end();
	}
	socket.on('play', function(data){
		chime.play();	
	})
	socket.on('stop', function(data){
		setTimeout(end, 2000 );
	})
    </script>
  </head>
<body>
  <button id="doorbell">
	<div id=image>
	</div>
</button>
<audio id="chime" src="http://blog.smashingkeyboards.com/wp-content/uploads/2014/05/doorbellchime.m4a"></audio>
</body>
</html>

